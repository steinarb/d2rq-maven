<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
  <title>D2R Server – Publishing Relational Databases on the Semantic Web</title>
<!--h1, h2, h3 { background: white; color: #005a9c; }-->
<style type=text/css>
body { background: white; color: black; font-family: sans-serif; line-height: 1.4em; padding: 2.5em 3em; margin: 0; }
:link { color: #00c; }
:visited { color: #609; }
a:link img { border: none; }
a:visited img { border: none; }
h1, h2, h3 { background: white; color: #800; }
h1 { font: 170% sans-serif; margin: 0; }
h2 { font: 140% sans-serif; margin: 1.5em 0 -0.5em 0; }
h3 { font: 120% sans-serif; margin: 1.5em 0 -0.5em 0; }
h4 { font: bold 100% sans-serif; }
h5 { font: italic 100% sans-serif; }
h6 { font: small-caps 100% sans-serif; }
.hide { display: none; }
pre { background: #fff6bb; font-family: monospace; line-height: 1.2em; padding: 1em 2em; }
dt { font-weight: bold; margin-top: 0; margin-bottom: 0; }
dd { margin-top: 0; margin-bottom: 0; }
code, tt { font-family: monospace; }
ul.toc { list-style-type: none; }
ol.toc li a { text-decoration: none; }
.note { color: red; }
#header { border-bottom: 1px solid #ccc; }
#logo { float: right; }
#authors { clear: right; float: right; font-size: 80%; text-align: right; }
#content { clear: both; margin: 2em auto 0 0; text-align: justify }
#download { font-family: sans-serif; margin-bottom: 1em; text-align: center; }
#download h2 { font-size: 125%; margin: 1.5em 0 -0.2em 0; }
#download small { color: #888; font-size: 80%; }
#footer { border-top: 1px solid #ccc; color: #aaa; margin: 2em 0 0; }

@media Print {
* { font-size: 92%; }
body { padding: 0; line-height: 1.2em; }
#content { margin: 0; width: 100%; }
}
@media Aural {
h1 { stress: 20; richness: 90; }
h2 { stress: 20; richness: 90; }
h3 { stress: 20; richness: 90; }
.hide { speak: none; }
dt { pause-before: 20%; }
pre { speak-punctuation: code; }
}
.Stil1 {color: #FF0000}
</style>
</head>
<body>

<div id="logo">
  <a href="http://www.fu-berlin.de/"><img src="images/fu-logo.gif" alt="Freie Universit&auml;t Berlin Logo" /></a>
</div>

<div id="header">
  <h1 style="font-size: 250%">D2R Server</h1>
  <div id="tagline">Publishing Relational Databases on the Semantic Web </div>
</div>

<div id="authors">
  <a href="http://www.bizer.de/" target="_blank">Chris Bizer</a><br />
  <a href="http://richard.cyganiak.de/" target="_blank">Richard Cyganiak</a>
</div>

<div id="content">

<p>D2R Server is a tool for publishing  relational databases on the Semantic Web.<br />
  The server enables RDF and HTML browsers to access the content of non-RDF databases,<br />
  and allows applications to query the database  using the SPARQL query language.</p>

<div id="download">
  <h2><a href="http://sourceforge.net/project/showfiles.php?group_id=111002&amp;package_id=188901">Download D2R Server</a></h2>
  <small>v0.3 (alpha), released 2006-09-04</small>
</div>

<h2 id="news">News</h2>

<ul>
  <li><strong>2006-09-04: Version 0.3 released.</strong> The new version enables database-generated URIs to be dereferenced.</li>
  <li><strong>2006-06-01: Version 0.2.1</strong> fixes Java 1.4 compatibility issue.</li>
  <li><strong>2006-05-30: Version 0.2 released</strong>,
    including a script for auto-generating mapping files from DB schemas,
    and a web-based SPARQL browser for exploring the mapped data.</li>
  <li><strong>2006-05-25: <a href="http://www2006.org/programme/item.php?id=d22" target="_blank">D2R Server Demo</a></strong> at the 15th World Wide Web Conference (WWW2006); slides:
    <a href="resources/d2r-server-slides-www2006.pdf" target="_blank">D2R Server
    presentation</a> (PDF)</li>
</ul>


<h2 id="contents">Contents</h2>
<ol class="toc">
  <li><a href="#intro"><strong>Introduction</strong></a></li>
  <li><a href="#RDFclient">Accessing a Database with an RDF Browser </a></li>
  <li><a href="#HTMLclient">Accessing a Database with an HTML Browser</a> </li>
  <li><a href="#SPARQLclient">Querying a Database  with a SPARQL Client</a></li>
  <li><a href="#mapping">Mapping a Relational Database to RDF </a></li>
  <li><a href="#installing"><strong>Installing and running D2R Server</strong></a></li>
  <li><a href="#mappingfiles">Pre-built mapping files</a></li>
  <li><a href="#support"><strong>Support and Feedback</strong></a></li>
  <li><a href="#development">Source code and development</a></li>
</ol>


<h2><a name="intro" id="intro"></a>1. Introduction</h2>

<p>The <a href="http://www.w3.org/2001/sw/" target="_blank">Semantic Web</a> is a global information space consisting of inter-linked data about <a href="http://www.w3.org/TR/webarch/#intro" target="_blank">resources</a>. There are two access paradigms to the Semantic Web: browsing and searching. Using a Semantic Web browser like <a href="http://dig.csail.mit.edu/2005/ajar/release/tabulator/0.7/tab.html" target="_blank">Tabulator</a>, a surfer can follow links from data about one resource to data about other resources. The second access paradigm is searching. Using the <a href="http://www.w3.org/TR/rdf-sparql-query/" target="_blank">SPARQL</a> query language and protocol, a client application can query data-sources for information about resources. </p>
<p>D2R Server is a tool for publishing the content of relational databases on the Semantic Web. Database content is mapped to RDF by a customizable mapping which specifies how resources are identified and which properties are used to describe resources. Based on this mapping, D2R Server allows a RDF representation of the database to be browsed and searched. The server provides two interfaces: The  <strong>dereferencing interface</strong> allows resource and vocabulary URIs to be dereferenced over the HTTP protocol. The interface supports content-negotiation and serves RDF and XHTML representations of resources. The server supports browsing by providing links on the RDF and XHTML level. The <strong>SPARQL interface</strong> enables applications to query the database  using the SPARQL query language over the SPARQL protocol. </p>
<p align="center" class="Stil1"><img src="images/architecture.gif" alt="D2R Server architecture diagram" /></p>
<p>The server takes requests from the Web and rewrites them via a <a href="http://www.wiwiss.fu-berlin.de/suhl/bizer/D2RQ/spec/" target="_blank">D2RQ mapping</a> into SQL queries against a relational database. This on-the-fly translation allows clients to access the content of large databases without having to replicate them into RDF. </p>


<h2><a name="RDFclient" id="RDFclient"></a>2. Accessing a Database with an RDF Browser </h2>

<p>RDF browsers retrieve data  from the Semantic Web  by <a href="http://www.w3.org/TR/2004/REC-webarch-20041215/#dereference-uri" target="_blank">dereferencing</a> URIs and by following <a href="http://www.w3.org/TR/2000/CR-rdf-schema-20000327/#s2.3.4" target="_blank"><tt>rdfs:seeAlso</tt></a> links within the data.   The screenshot below shows an example database browsed in the <a href="http://dig.csail.mit.edu/2005/ajar/release/tabulator/0.7/tab.html" target="_blank">Tabulator</a> RDF browser.</p>

<p class="Stil1">@@@ Tabulator Screenshot. Screenshot bitte auf volle Gr&ouml;&szlig;e extendable verlinken. </p>


<h3>2.1 Dereferencing URIs Identifying Database Content </h3>

<p>D2R Server allows database-generated URIs to be dereferenced. The HTTP request below, sent to the server <tt>d2r.exmaple.org</tt>, requests an RDF representation of the resource <tt>http://d2r.example.org/resource/persons/4</tt>. Note that the request asks for content type <tt>application/rdf+xml</tt>.</p>

<pre>GET /resource/persons/4 HTTP/1.0
Accept: application/rdf+xml</pre>

<p>According to the <a href="http://www.w3.org/2001/tag/issues.html#httpRange-14" target="_blank">httpRange-14 finding</a>, only information resources (i.e. documents) can 
  have representations served on the Web over HTTP. When
  URIs that identify other kinds of resources, such as a person, 
  are dereferenced, then the HTTP reply must be a 303
  redirect to a second URI. At that location, a document describing
  the person is served. D2R Server implements this 
  behaviour and will answer with an HTTP response like this:</p>

<pre>HTTP/1.1 303 See Other
Location: http://d2r.example.org/sparql?query=DESCRIBE+%3Chttp%3A%2F%...
Connection: close</pre>

<p>The client has to perform a second HTTP GET request on the
  Location URI. D2R Server will respond with an RDF/XML document
  containing an RDF/XML description of the person:</p>

<pre>@@@ RDF/XML of /resource/persons/4</pre>

<p>The description is generated on the fly from the content of the database.
  Note that the response contains URIs of related resources such as papers
  and topics. Descriptions of these can be retrieved in the same way.
  There is also an <tt>rdfs:seeAlso</tt> link to <tt>http://d2r.example.org/all/persons</tt>.
  This is an RDF/XML list of all persons stored in the database. Parts of it
  are shown below. By following
  these links, RDF browsers and RDF crawlers can access the complete content
  of the database.</p>

<pre>@@@ &lt;rdf:RDF .... kurze liste die Struktur zeigt&gt;</pre>

<p>The list contains <tt>rdf:type</tt> and <tt>rdfs:label</tt> statements
  for each resource. This leaves a breadcrumb trail to help browsers decide
  which links to follow.</p>


<h3>2.2 Dereferencing External URIs</h3>

<p>The database may also contain information about resources whose URIs are outside the server's namespace. When the server generates output that mentions such a resource, it adds an <tt>rdfs:seeAlso</tt> statement to the resource pointing at an RDF/XML document that contains all information that the database has about the external resource. By dereferencing the external URI and by following the rdf:seeAlso link, an RDF browser can retrieve both <a href="http://www.w3.org/TR/webarch/#representation-management">authoritative as well as non-authoritative information</a>  about the resource. </p>


<h2>3. <a name="HTMLclient" id="HTMLclient"></a>Accessing a Database with  an HTML Browser </h2>

<p>D2R Server can generate XHTML representations of the resources within the database. These representations are retrieved by dereferencing the resource URI with a HTTP request that asks for HTML (content type <tt>text/html</tt>) or XHTML (<tt>application/xhtml+xml</tt>).</p>

<pre>GET /resource/persons/4 HTTP/1.0
Accept: text/html</pre>

<p>Like in the <tt>application/rdf+xml</tt> case, D2R Server will redirect to a document describing the resource, but this time an XHTML page:</p>

<p class="Stil1">@@@ Put Firefox screenshot here. Wichtig: Bitte customized mapping verwenden, dass  viele
unterschiedliche well-known vocabulaires verwendet. Screenshot bitte auf volle Gr&ouml;&szlig;e extendable verlinken.  </p>

<p>The representation contains navigation links that allow the complete content of the database to be browsed.</p>
<p>The <tt>&lt;head&gt;</tt> section of the HTML page contains a <tt>&lt;link rel="alternate" /&gt;</tt> tag pointing to the resource's RDF representation. This allows tools like <a href="http://simile.mit.edu/piggy-bank/" target="_blank">Piggy Bank</a> to switch between the HTML and RDF views.</p>
<p>All pages are rendered from <a href="http://jakarta.apache.org/velocity/">Velocity</a> templates to allow customization. Future version of D2R Server might also employ <a href="http://www.w3.org/2005/04/fresnel-info/" target="_blank">Fresnel</a> lenses to improve resource display.</p>


<h2><a name="SPARQLclient" id="SPARQLclient"></a>4. Querying a Database with a SPARQL Client</h2>

<p>D2R Server provides a SPARQL endpoint for querying the database using the <a href="http://www.w3.org/TR/rdf-sparql-query/" target="_blank">SPARQL query language</a> over the <a href="http://www.w3.org/TR/rdf-sparql-protocol/" target="_blank">SPARQL protocol</a>. The endpoint URI is <tt>http://d2r.example.org/sparql</tt>. Results can be retrieved in the <a href="http://www.w3.org/TR/rdf-sparql-XMLres/">SPARQL Query Result XML Format</a> and the <a href="http://www.w3.org/2001/sw/DataAccess/json-sparql/">SPARQL/JSON serialization</a>.</p>

<p>Example SPARQL Query:</p>

<pre>GET @@@</pre>

<p>Response in SPARQL XML Result Format:</p>

<pre>@@@</pre>


<h2><a name="mapping" id="mapping"></a>5. Mapping a Relational Database to RDF</h2>

<p>D2R Server uses the <a href="http://www.wiwiss.fu-berlin.de/suhl/bizer/D2RQ/spec/" target="_blank">D2RQ Mapping Language</a> to map the content of a relational database to RDF. A D2RQ mapping specifies how resources are identified and which properties are used to describe the resources.</p>
<p>D2R Server includes a tool that automatically generates a D2RQ mapping from the table structure of a database. The  tool generates a new RDF vocabulary for each database, using table names as class names and column names as property names.</p>
<p>In order to enable Semantic Web client applications to understand as much of your data as possible, you should use <a href="http://ebiquity.umbc.edu/blogger/100-most-common-rdf-namespaces/" target="_blank">well-known</a> and <a href="http://www.w3.org/TR/swbp-vocab-pub/" target="_blank">publically accessable</a> RDF vocabularies to describe your data. Therefore, you should customize your mapping file and replace the auto-generated terms with terms from these RDF vocabularies.</p>


<h2 id="installing">6. Installing and running D2R Server</h2>

<p>You need:</p>
<ul>
  <li><strong>Java 1.4</strong> or newer on the path (check with
    <tt>java -version</tt> if you're not sure),</li>
  <li>a <strong>modern browser</strong> like Firefox, Opera or Safari
    for using  D2R Server's AJAX SPARQL client. Internet Explorer will currently not
    work. The XHTML resource representations work with all browsers though.</li>
</ul>

<p>What to do:</p>
<ol>
  <li><p><strong><a href="#download">Download</a> and extract the archive</strong> into a suitable location.
    Optionally, add the extracted directory (where the <tt>d2r-server</tt>
    and <tt>d2r-server.bat</tt> files reside) to the path.</p></li>
  <li><p><strong>Download a JDBC driver</strong> from your database vendor.
    Place the driver's JAR file into D2R Server's <tt>/lib</tt> directory.
    A <a href="http://developers.sun.com/product/jdbc/drivers">list of JDBC drivers</a>
    from different vendors is maintained by Sun. Also take
    note of the <strong>driver class name</strong> (e.g.
    <tt>org.postgresql.Driver</tt> for PostgreSQL or
    <tt>oracle.jdbc.driver.OracleDriver</tt> for Oracle) and
    <strong>JDBC URL pattern</strong> (e.g.
    <tt>jdbc:mysql://<em>servername</em>/<em>database</em></tt>
    for MySQL) from the driver's documentation. A driver for MySQL is
    already included with D2R Server.</p></li>
  <li><p><strong>Generate a mapping file</strong> for your database schema.
    Change into the D2R Server directory and run:</p>
    <pre>generate-mapping -o <em>mapping.ttl</em> -d <em>driver.class.name</em>
    -u <em>db-user</em> -p <em>db-password</em> <em>jdbc:url:...</em></pre>
    <p>Replace the parts in italics with appropriate values.
    <tt><em>mapping.ttl</em></tt> is the name for the new mapping file.
    <tt>-d</tt> can be skipped for MySQL.</p></li>
  <li><p><strong>Start the server:</strong></p>
    <pre>d2r-server <em>mapping.ttl</em></pre>
    <p>The SPARQL endpoint is at
    <a href="http://localhost:2020/sparql">http://localhost:2020/sparql</a>
    and can now be queried by any SPARQL client.</p>
    <p>The server can be started with the <tt>-p &lt;port&gt;</tt> option to run
      it on a port other than the default 2020, and with the <tt>-b &lt;baseURI&gt;</tt>
      option if the server's name is different from <tt>localhost</tt>:</p>
    <pre>d2r-server -p <em>80</em> -b <em>http://d2r.example.org/</em> <em>mapping.ttl</em></pre>
    </li>
  <li>
    <p><strong>Testing the Server: </strong> Open <a href="http://localhost:2020/">http://localhost:2020/</a>
    in a web browser.</p>
    <p>@@@ Re-do screenshot</p>
    <p><img src="images/d2rs-screenshot-start.png" alt="Screenshot of D2R Server's web interface" style="margin: -4px -15px -15px -10px;"/></p>
    <p>You can use the SPARQL form to execute queries and display results
      in a number of formats, or use the Browse box on the right to explore
      the endpoint's contents.</p>
    <p>@@@ Re-do screenshot</p>
    <p><img src="images/d2rs-screenshot-browse.png" alt="Screenshot of D2R Server's SPARQL explorer" style="margin: -4px -15px -15px -10px;"/></p></li>
    <p>To test the data in an RDF browser, open any resource URI in
      <a href="http://dig.csail.mit.edu/2005/ajar/release/tabulator/0.7/tab.html">Tabulator</a>.
      You may have to tweak your Firefox settings first &#8211; see the Tabulator help.</p>

  <li><p><strong>Customize the database-to-RDF mapping</strong> by editing the
    mapping file with a text editor. Its syntax is described in the
    <a href="http://www.wiwiss.fu-berlin.de/suhl/bizer/D2RQ/spec/">D2RQ Manual</a>.
    D2R Server will automatically detect changes to the mapping file and
    reload appropriately when you hit the browser's refresh button.</p></li>
</ol>


<h2 id="mappingfiles">7. Pre-built mapping files</h2>

<p>We collect mapping files for popular database-driven applications.</p>

<ul>
  <li><a href="mappings/wordpress.ttl">Wordpress</a></li>
</ul>

<p>Have another one?
  <a href="mailto:d2rq-map-devel@lists.sourceforge.net">Please share it</a>.</p>


<h2><a name="support" id="support"></a>8. Support and feedback</h2>

<p>You can contact us on the
  <a href="https://lists.sourceforge.net/lists/listinfo/d2rq-map-devel">D2RQ
  mailing list</a> at
  <a href="mailto:d2rq-map-devel@lists.sourceforge.net">d2rq-map-devel@lists.sourceforge.net</a>.</p>


<h2 id="development">9. Source code and development</h2>
<p> D2R Server combines the <a href="http://www.wiwiss.fu-berlin.de/suhl/bizer/D2RQ/">D2RQ API</a>, the <a href="http://www.joseki.org/">Joseki SPARQL Server</a> and the <a href="http://jetty.mortbay.org/">Jetty webserver</a>.</p>
<p>D2R Server is hosted by <a href="http://sourceforge.net/">SourceForge.net</a>
    as part of the <a href="http://sourceforge.net/projects/d2rq-map/">D2RQ project</a>.
    The latest source code is available from the project's
    <a href="http://sourceforge.net/cvs/?group_id=111002">CVS repository</a>
    and can be
    <a href="http://d2rq-map.cvs.sourceforge.net/d2rq-map/d2r-server/">browsed
    online</a>.</p>
<p><a href="http://sourceforge.net/projects/d2rq-map/"><img src="http://sourceforge.net/sflogo.php?group_id=111002&amp;type=5" alt="SourceForge Logo" /></a></p>


<div id="footer">
  <small>$Id: index.html,v 1.11 2006/09/05 08:25:09 cyganiak Exp $</small>
</div>
</div>

</body>
</html>
