@prefix d2rq: <http://www.wiwiss.fu-berlin.de/suhl/bizer/D2RQ/0.1#> .
@prefix rdf:        <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:       <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl:        <http://www.w3.org/2002/07/owl#> .
@prefix dc:         <http://purl.org/dc/elements/1.1/> .
@prefix dtype:      <http://www.w3.org/2001/XMLSchema#> . 

# -----------------------------------------------
#
# D2RQ Language Specification V0.3
#
# -----------------------------------------------

<> rdfs:comment     "Database to RDF Query Vocabulary" ;
   dc:creator       "Chris Bizer" ;
   dc:creator       "Richard Cyganiak" ;
   dc:subject       "" ;
   dc:publisher     "" ;
   dc:title         "" ;
   dc:description   "" ;
   dc:date          "2004-08-10" ;
   dc:format        "RDF" ;
   dc:identifier    <> ;
   .

# See D2RQ Users Manual for detailed explanations and examples:
# http://www.wiwiss.fu-berlin.de/suhl/bizer/d2rq/spec/


# D2RQ Namespace
# @@@ TODO: replace all occurrences with d2rq:
@prefix :       <http://www.wiwiss.fu-berlin.de/suhl/bizer/D2RQ/0.1#> .

# -----------------------------------------------
# Processing Instructions
# -----------------------------------------------

:ProcessingInstructions rdf:type rdfs:Class ;
    		rdfs:comment "Attach processing instructions to nodes of this type." 
    		.

:queryHandler	rdf:type rdf:Property ;
				rdfs:comment "a Java class name that specifies the graphs QueryHandler";
	   			rdfs:domain :ProcessingInstructions
            	.

# -----------------------------------------------
# Database
# -----------------------------------------------

:Database 	rdf:type rdfs:Class ;
    		rdfs:comment "Represents a database" 
    		.

:odbcDSN    	rdf:type rdf:Property ;
	   	rdfs:domain :Database
            	.
:jdbcDriver 	rdf:type rdf:Property ;
            	rdfs:domain :Database
            	.
:jdbcDSN    	rdf:type rdf:Property ;
            	rdfs:domain :Database
            	.
:username   	rdf:type rdf:Property ;
            	rdfs:domain :Database
            	.
:password   	rdf:type rdf:Property ;
            	rdfs:domain :Database
            	.
:numericColumn  rdf:type rdf:Property ;
                rdfs:domain :Database
                .
:textColumn     rdf:type rdf:Property ;
                rdfs:domain :Database
                .
:dateColumn     rdf:type rdf:Property ;
                rdfs:domain :Database
                .
:allowDistinct  rdf:type rdf:Property ;
				rdfs:comment "Value: true/false that describe the databases ability to handle DISTINCT correctly. (e.g. MSAccess cuts fields longer than 256 chars)";
                rdfs:domain :Database
                .
:expressionTranslator     rdf:type rdf:Property ;
				rdfs:comment "A Java class or string null (for no expression translation";
                rdfs:domain :Database
                .


# -----------------------------------------------
# Resource Map
# -----------------------------------------------
# Supertype of ClassMap and PropertyBridge, not used in mapping files

d2rq:ResourceMap
		a rdfs:Class;
		rdfs:label "Resources map";
		rdfs:comment "A database-to-RDF mapping from one or more database columns to a set of RDF resources";
		.
d2rq:uriPattern
		a rdf:Property;
		rdfs:label "URI pattern"
		rdfs:comment "URI pattern with placeholders that will be filled with values from a database column.";
		rdfs:domain d2rq:ResourceMap;
		.
d2rq:uriColumn
		a rdf:Property;
		rdfs:label "URI column";
		rdfs:comment "Database column which contains URIs.";
		rdfs:domain d2rq:ResourceMap;
		.
d2rq:bNodeIdColumns
		a rdf:Property;
		rdfs:label "bNode ID columns";
		rdfs:comment "Comma-separated list of database columns used for construction of blank nodes";
		rdfs:domain d2rq:ResourceMap;
		.
d2rq:condition
		a rdf:Property;
		rdfs:label "condition";
		rdfs:comment "SQL WHERE condition that must be satisfied for a database row to be mapped";
		rdfs:domain d2rq:ResourceMap;
		.


# -----------------------------------------------
# Class Map
# -----------------------------------------------

d2rq:ClassMap
		a rdfs:Class;
    		rdfs:subClassOf d2rq:ResourceMap;
		rdfs:label "Class map";
		rdfs:comment "Maps an RDFS or OWL class to its database representation.";
    		.
:class          rdf:type rdf:Property ;
                rdfs:comment "Links d2rq:classMaps to RDFS or OWL classes." ;
                rdfs:domain :ClassMap ;
                rdfs:range rdfs:Class ;
                owl:inverseOf :classMap
                .
:dataStorage 	rdf:type rdf:Property ;
             	rdfs:domain :ClassMap ;
             	rdfs:range  :Database
             	.
:additionalProperty rdf:type rdf:Property ;
             	rdfs:domain :ClassMap ;
             	rdfs:range  :AdditionalProperty
             	.
:containsDuplicates rdf:type rdf:Property ;
             	rdfs:domain :ClassMap
             	.

# -----------------------------------------------
# Class Map Property
# -----------------------------------------------

:classMap        rdf:type rdf:Property ;
                 rdfs:comment "Used to link RDFS or OWL classes to d2r:classMaps." ;
                 rdfs:domain rdfs:Class ;
                 rdfs:range  :ClassMap ;
                 owl:inverseOf :class
                 .


# -----------------------------------------------
# Property Bridge
# -----------------------------------------------

d2rq:PropertyBridge
		a rdfs:Class;
		rdfs:subClassOf d2rq:ResourceMap;
		rdfs:label "Property bridge";
		rdfs:comment "Maps an RDF property to one or more database columns.";
		.
:property       rdf:type rdf:Property ;
                rdf:comment "Links a d2rq:PropertyBridge to an RDF property." ;
                rdfs:domain :PropertyBridge ;
                rdfs:range rdf:Property ;
                owl:inverseOf :propertyBridge
                .
:column      	rdf:type rdf:Property ;
             	rdfs:domain :PropertyBridge
             	.
:join        	rdf:type rdf:Property ;
             	rdfs:domain :PropertyBridge 
             	.
:alias        	rdf:type rdf:Property ;
             	rdfs:domain :PropertyBridge 
             	.
:pattern     	rdf:type rdf:Property ;
             	rdfs:domain :PropertyBridge
             	.
d2rq:datatype
		a rdf:Property;
		rdfs:label "datatype";
		rdfs:comment "The datatype of literals created by this bridge";
		rdfs:domain d2rq:PropertyBridge;
		.
d2rq:lang
		a rdf:Property;
		rdfs:label "language";
		rdfs:comment "The language tag of literals created by this bridge";
		rdfs:domain d2rq:PropertyBridge;
		.
:belongsToClassMap rdf:type rdf:Property ;
             	rdfs:domain :PropertyBridge ;
             	rdfs:range  :ClassMap
             	.
:refersToClassMap rdf:type rdf:Property ;
             	rdfs:domain :ObjectPropertyBridge ;
             	rdfs:comment "Has to be used if a join refers to a different classMap."; 
             	rdfs:range  :ClassMap
             	.
:translateWith rdf:type rdf:Property ;
             	rdfs:domain :PropertyBridge ;
             	rdfs:range  :TranslationTable
             	.
:valueContains  rdf:type rdf:Property ;
                rdfs:domain :PropertyBridge ;
                rdfs:comment "Optimizing hint: a string contained in every value of this PropertyBridge"
                .
:valueRegex     rdf:type rdf:Property ;
                rdfs:domain :PropertyBridge ;
                rdfs:comment "Optimizing hint: a regular expression matching every value of this PropertyBridge"
                .
:valueMaxLength rdf:type rdf:Property ;
                rdfs:domain :PropertyBridge ;
                rdfs:comment "Optimizing hint: the maximum length of values of this PropertyBridge"
                .


# -----------------------------------------------
# Datatype and Object Property Bridge
# -----------------------------------------------
# Deprecated: use PropertyBridge and indicate the kind of generated
# resources by specifying either d2rq:column/d2rq:pattern or
# d2rq:uriColumn/d2rq:uriPattern.

:DatatypePropertyBridge
		a rdfs:Class;
		rdfs:subClassOf d2rq:PropertyBridge;
		rdfs:label "Datatype property bridge (deprecated)";
		rdfs:comment "Maps a datatype property to one or more database columns.";
		.

:ObjectPropertyBridge
		a rdfs:Class;
		rdfs:subClassOf d2rq:PropertyBridge;
		rdfs:comment "Maps an object property to one or more database columns.";
		.


# -----------------------------------------------
# Property Bridge Property
# -----------------------------------------------

:propertyBridge  rdf:type rdf:Property ;
                 rdfs:comment "Used for linking RDFS properties to D2R property bridges." ;
                 rdfs:domain rdf:Property ;
                 rdfs:range  :PropertyBridge ;
                 owl:inverseOf :property
                 .

# -----------------------------------------------
# Additional Property Definition
# -----------------------------------------------

:AdditionalProperty rdf:type rdfs:Class ;
    		rdfs:comment "Adds an additonal property to a class if D2R Map is used for DB exports, not DB queries." 
    		.

:propertyName rdf:type rdf:Property ;
            	rdfs:domain :AdditionalProperty
            	.
:propertyValue rdf:type rdf:Property ;
            	rdfs:domain :AdditionalProperty
            	.            
                       

# -----------------------------------------------
# Translation Table
# -----------------------------------------------

:TranslationTable rdf:type rdfs:Class ;
             	rdfs:comment "Lookup table for translations used in the mapping process." 
             	.
:href rdf:type rdf:Property ;
             	rdfs:domain :TranslationTable;
             	rdfs:comment "Link to a translation table in an external CSV file."
             	.
:javaClass      rdf:type rdf:Property ;
             	rdfs:comment "Qualified name of a Java class that implements de.fuberlin.wiwiss.d2rq.Translator and translates between database and RDF."; 
             	rdfs:domain :ClassMap
             	.
:translation 	rdf:type rdf:Property ;
             	rdfs:domain :TranslationTable;
             	rdfs:range  :Translation
             	.
:Translation 	rdf:type rdfs:Class ;
             	rdfs:comment "Translation Key/Value Pair." 
             	.
:databaseValue rdf:type rdf:Property ;
             	rdfs:domain :Translation
             	.
:rdfValue	rdf:type rdf:Property ;
             	rdfs:domain :Translation
             	.
